(function(e){function n(e,n){for(var t in n)e[t]=e[t]||n[t];return e}function t(e){var n=Object.keys(e).map(function(n){return[n,encodeURIComponent(e[n])].join("=")});return"?"+n.join("&")}function r(e){return e}var o={json:function(e){return e.json()},text:function(e){return e.text()},response:true};var s={json:JSON.stringify,noop:r,true:r,false:r};function u(e,r,u,i,c){u=n({},u);u.method=e;u.headers=n({},u.headers||{});if(u.responseAs!==true&&typeof u.responseAs!=="function"){u.responseAs=o[u.responseAs]||o.json}n(u.headers,{Accept:"application/json","Content-Type":"application/json"});if(c){r+=t(c)}if(i){if(typeof u.encodeAs!=="function"){u.encodeAs=s[u.encodeAs]||s.json}u.body=u.encodeAs(i)}return f.fetch(r,u).then(function(e){if(e.status>=200&&e.status<300){if(u.responseAs===true)return e;if(e.status==204)return null;return u.responseAs(e)}if(typeof u.errorAs!=="function"){var n=new Error(e.statusText);n.response=e;throw n}else{throw u.errorAs(e)}})}function f(e,t){t=t||{};var r=function(r,o){r=e+"/"+r;o=o||{};n(o,t);return f(r,o)};r.get=function(n){return u("GET",e,t,null,n)};r.post=function(n,r){return u("POST",e,t,n,r)};r.put=function(n,r){return u("PUT",e,t,n,r)};r.patch=function(n,r){return u("PATCH",e,t,n,r)};r.delete=function(n){return u("DELETE",e,t,null,n)};return r}f.fetch=typeof fetch!=="undefined"?fetch.bind(e):null;f.responseHandlers=o;f.encodeHandlers=s;if(typeof exports==="object")module.exports=f;else if(typeof define==="function"&&define.amd)define(function(){return f});else e.fetchival=f})(typeof window!="undefined"?window:undefined);
